function htmlEncode(e){return 0==e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")}$(function(){$("#btn-convert").click(function(){var e=$("#tool-text").val();if(e.length<=0)return tips_error("璇疯緭鍏ユ枃鏈紒"),$("#tool-text").focus(),!1;var r="<br>",c=document.getElementById("pTag").checked,a=(document.getElementById("pTagbrTag").checked,document.getElementById("brTag").checked);if(document.querySelector("#tfEncode:checked"))var l=document.querySelector("#tfEncode:checked").value;else l="no";var t=(e=(e=(e=(e=htmlEncode(e)).replace(/\r\n/g,"XiLBXZ")).replace(/\n/g,"XiLBXZ")).replace(/\r/g,"XiLBXZ")).length,u=[];if("yes"==l){for(;t--;){var i=e[t].charCodeAt();u[t]=34==i||38==i||96==i||127<i?"&#"+i+";":e[t]}e=u.join(""),relq=/\&\#32\;/g,e=e.replace(relq," "),relq=/\&\#10\;/g,e=e.replace(relq," "),relq=/\&\#9\;/g,e=e.replace(relq," ");for(var p=new Array("&#169;","&#174;","&#178;","&#179;","&#34;","&#38;","&#8211;","&#8212;","&#8216;","&#8217;","&#8220;","&#8221;","&#8226;","&#8224;","&#8225;","&#8242;","&#8243;","&#8249;","&#8250;","&#8364;","&#8482;","&#732;","&#710;","&#9824;","&#9827;","&#9829;","&#9830;","&#9674;","&#8592;","&#8594;","&#8593;","&#8595;","&#8596;","&#172;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#170;","&#171;","&#172;","&#173;","&#175;","&#176;","&#177;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;"),g=new Array("&copy;","&reg;","&sup2;","&sup3;","&quot;","&amp;","&ndash;","&mdash;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&bull;","&dagger;","&Dagger;","&prime;","&Prime;","&lsaquo;","&rsaquo;","&euro;","&trade;","&tilde;","&circ;","&spades;","&clubs;","&hearts;","&diams;","&loz;","&larr;","&rarr;","&uarr;","&darr;","&harr;","&not;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&ordf;","&laquo;","&not;","&shy;","&macr;","&deg;","&plusmn;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;"),n=0;n<p.length;n++)e=e.replace(new RegExp(p[n],"g"),g[n])}re1=/\s+/g,e=(e=e.replace(re1," ")).trim(),e=0!=a||0!=a?(re4=/XiLBXZXiLBXZ/gi,e.replace(re4,r+"\r\n"+r+"\r\n")):(re4=/XiLBXZXiLBXZ/gi,e.replace(re4,"</p><p>")),e=0==c||0==c?(re5=/XiLBXZ/gi,e.replace(re5,r+"\r\n")):(re5=/XiLBXZ/gi,e.replace(re5," ")),0!=a&&0!=a||(e="<p>"+e+"</p>"),e=(e=(e=(e=(e=(e=e.replace("<p></p>","")).replace("\r\n\r\n","")).replace(/<\/p><p>/g,"</p>\r\n\r\n<p>")).replace(new RegExp("<p><br />","g"),"<p>")).replace(new RegExp("<p><br>","g"),"<p>")).replace(new RegExp(" </p>","g"),"</p>"),tips_clear(),$("#tool-result").val(e)})});